\* TLC Configuration for GreyConsensus
\* Run: tlc GreyConsensus.tla -config GreyConsensus.cfg

\* Model values
CONSTANTS
    Nodes = {n1, n2, n3}
    MaxTerm = 3
    MaxLogLength = 4
    Values = {v1, v2}

\* Symmetry optimization (nodes are interchangeable)
SYMMETRY Permutations(Nodes)

\* Invariants to check
INVARIANTS
    TypeInvariant
    Agreement
    LogMatching
    CommittedEntriesNeverRollback

\* Liveness properties (requires fairness)
PROPERTIES
    EventualLeader

\* Specification
SPECIFICATION Spec

\* State constraint to bound exploration
CONSTRAINT
    /\ \A n \in Nodes: currentTerm[n] <= MaxTerm
    /\ \A n \in Nodes: Len(log[n]) <= MaxLogLength
    /\ Cardinality(messages) <= 20
