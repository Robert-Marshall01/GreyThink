{
  "title": "Grey Distributed - Economics Dashboard",
  "description": "Comprehensive view of resource pricing, token economics, and cost analysis",
  "version": "1.0.0",
  "refresh_interval": "30s",
  "time_range": {
    "default": "24h",
    "options": ["1h", "6h", "24h", "7d", "30d"]
  },
  "variables": [
    {
      "name": "cluster",
      "type": "query",
      "label": "Cluster",
      "query": "label_values(grey_cluster_info, cluster_id)",
      "multi": true,
      "include_all": true
    },
    {
      "name": "tenant",
      "type": "query",
      "label": "Tenant",
      "query": "label_values(grey_tenant_info, tenant_id)",
      "multi": true,
      "include_all": true
    }
  ],
  "rows": [
    {
      "title": "Overview",
      "height": "100px",
      "panels": [
        {
          "title": "Total Token Supply",
          "type": "stat",
          "gridPos": {"x": 0, "y": 0, "w": 4, "h": 4},
          "targets": [
            {
              "expr": "sum(grey_token_total_supply)",
              "legendFormat": "Total Supply"
            }
          ],
          "format": "short",
          "colorMode": "background",
          "thresholds": [
            {"value": 0, "color": "blue"}
          ]
        },
        {
          "title": "Active Tokens",
          "type": "stat",
          "gridPos": {"x": 4, "y": 0, "w": 4, "h": 4},
          "targets": [
            {
              "expr": "sum(grey_token_active_balance)",
              "legendFormat": "Active"
            }
          ],
          "format": "short",
          "colorMode": "background",
          "thresholds": [
            {"value": 0, "color": "green"}
          ]
        },
        {
          "title": "Consumed (24h)",
          "type": "stat",
          "gridPos": {"x": 8, "y": 0, "w": 4, "h": 4},
          "targets": [
            {
              "expr": "sum(increase(grey_token_consumed_total[$__range]))",
              "legendFormat": "Consumed"
            }
          ],
          "format": "short",
          "colorMode": "background",
          "thresholds": [
            {"value": 0, "color": "orange"}
          ]
        },
        {
          "title": "Revenue (24h)",
          "type": "stat",
          "gridPos": {"x": 12, "y": 0, "w": 4, "h": 4},
          "targets": [
            {
              "expr": "sum(increase(grey_revenue_total[$__range]))",
              "legendFormat": "Revenue"
            }
          ],
          "format": "currency",
          "colorMode": "background",
          "thresholds": [
            {"value": 0, "color": "purple"}
          ]
        },
        {
          "title": "Avg Token Price",
          "type": "stat",
          "gridPos": {"x": 16, "y": 0, "w": 4, "h": 4},
          "targets": [
            {
              "expr": "avg(grey_token_unit_price)",
              "legendFormat": "Price"
            }
          ],
          "format": "currencyUSD",
          "colorMode": "value",
          "thresholds": [
            {"value": 0, "color": "blue"}
          ]
        },
        {
          "title": "System Health",
          "type": "stat",
          "gridPos": {"x": 20, "y": 0, "w": 4, "h": 4},
          "targets": [
            {
              "expr": "grey_economics_health_score",
              "legendFormat": "Health"
            }
          ],
          "format": "percent",
          "colorMode": "background",
          "thresholds": [
            {"value": 0, "color": "red"},
            {"value": 80, "color": "yellow"},
            {"value": 95, "color": "green"}
          ]
        }
      ]
    },
    {
      "title": "Resource Pricing",
      "height": "300px",
      "panels": [
        {
          "title": "CPU Pricing Over Time",
          "type": "timeseries",
          "gridPos": {"x": 0, "y": 4, "w": 8, "h": 8},
          "targets": [
            {
              "expr": "grey_cpu_price_per_hour{cluster=~\"$cluster\"}",
              "legendFormat": "{{cluster}} - CPU/hour"
            },
            {
              "expr": "grey_cpu_base_price",
              "legendFormat": "Base Price"
            }
          ],
          "unit": "tokens",
          "yAxisLabel": "Tokens per CPU-hour",
          "legend": {"show": true, "placement": "bottom"}
        },
        {
          "title": "Memory Pricing Over Time",
          "type": "timeseries",
          "gridPos": {"x": 8, "y": 4, "w": 8, "h": 8},
          "targets": [
            {
              "expr": "grey_memory_price_per_gb_hour{cluster=~\"$cluster\"}",
              "legendFormat": "{{cluster}} - Memory/GB-hour"
            }
          ],
          "unit": "tokens",
          "yAxisLabel": "Tokens per GB-hour",
          "legend": {"show": true, "placement": "bottom"}
        },
        {
          "title": "Storage Pricing",
          "type": "timeseries",
          "gridPos": {"x": 16, "y": 4, "w": 8, "h": 8},
          "targets": [
            {
              "expr": "grey_storage_price_per_gb_month{cluster=~\"$cluster\", storage_class=\"standard\"}",
              "legendFormat": "Standard"
            },
            {
              "expr": "grey_storage_price_per_gb_month{cluster=~\"$cluster\", storage_class=\"ssd\"}",
              "legendFormat": "SSD"
            },
            {
              "expr": "grey_storage_price_per_gb_month{cluster=~\"$cluster\", storage_class=\"nvme\"}",
              "legendFormat": "NVMe"
            }
          ],
          "unit": "tokens",
          "yAxisLabel": "Tokens per GB-month",
          "legend": {"show": true, "placement": "bottom"}
        }
      ]
    },
    {
      "title": "Network Pricing",
      "height": "300px",
      "panels": [
        {
          "title": "Bandwidth Pricing",
          "type": "timeseries",
          "gridPos": {"x": 0, "y": 12, "w": 8, "h": 8},
          "targets": [
            {
              "expr": "grey_bandwidth_price_per_gb{direction=\"egress\"}",
              "legendFormat": "Egress"
            },
            {
              "expr": "grey_bandwidth_price_per_gb{direction=\"ingress\"}",
              "legendFormat": "Ingress"
            },
            {
              "expr": "grey_bandwidth_price_per_gb{direction=\"cross_region\"}",
              "legendFormat": "Cross-Region"
            }
          ],
          "unit": "tokens",
          "legend": {"show": true, "placement": "bottom"}
        },
        {
          "title": "Congestion Multiplier",
          "type": "timeseries",
          "gridPos": {"x": 8, "y": 12, "w": 8, "h": 8},
          "targets": [
            {
              "expr": "grey_network_congestion_multiplier{cluster=~\"$cluster\"}",
              "legendFormat": "{{cluster}}"
            }
          ],
          "unit": "short",
          "yAxisLabel": "Multiplier",
          "thresholds": [
            {"value": 1.0, "color": "green", "op": "lt"},
            {"value": 1.5, "color": "yellow", "op": "lt"},
            {"value": 2.0, "color": "red", "op": "gte"}
          ],
          "legend": {"show": true, "placement": "bottom"}
        },
        {
          "title": "Request Pricing",
          "type": "timeseries",
          "gridPos": {"x": 16, "y": 12, "w": 8, "h": 8},
          "targets": [
            {
              "expr": "grey_request_price_per_million",
              "legendFormat": "Price per 1M requests"
            }
          ],
          "unit": "tokens",
          "legend": {"show": true, "placement": "bottom"}
        }
      ]
    },
    {
      "title": "Token Economics",
      "height": "300px",
      "panels": [
        {
          "title": "Token Balance by Tenant",
          "type": "barchart",
          "gridPos": {"x": 0, "y": 20, "w": 12, "h": 8},
          "targets": [
            {
              "expr": "topk(10, grey_token_balance{tenant=~\"$tenant\"})",
              "legendFormat": "{{tenant}}"
            }
          ],
          "unit": "short",
          "orientation": "horizontal"
        },
        {
          "title": "Token Velocity",
          "type": "gauge",
          "gridPos": {"x": 12, "y": 20, "w": 6, "h": 8},
          "targets": [
            {
              "expr": "sum(rate(grey_token_transactions_total[1h])) / sum(grey_token_active_balance) * 3600",
              "legendFormat": "Velocity"
            }
          ],
          "unit": "short",
          "min": 0,
          "max": 1,
          "thresholds": [
            {"value": 0, "color": "blue"},
            {"value": 0.3, "color": "green"},
            {"value": 0.7, "color": "yellow"},
            {"value": 0.9, "color": "red"}
          ]
        },
        {
          "title": "Token Distribution",
          "type": "piechart",
          "gridPos": {"x": 18, "y": 20, "w": 6, "h": 8},
          "targets": [
            {
              "expr": "sum(grey_token_balance) by (tenant_tier)",
              "legendFormat": "{{tenant_tier}}"
            }
          ],
          "legend": {"show": true, "placement": "right"}
        }
      ]
    },
    {
      "title": "Cost Analysis",
      "height": "300px",
      "panels": [
        {
          "title": "Cost by Resource Type",
          "type": "timeseries",
          "gridPos": {"x": 0, "y": 28, "w": 12, "h": 8},
          "targets": [
            {
              "expr": "sum(rate(grey_cost_total{resource_type=\"cpu\"}[5m])) * 300",
              "legendFormat": "CPU"
            },
            {
              "expr": "sum(rate(grey_cost_total{resource_type=\"memory\"}[5m])) * 300",
              "legendFormat": "Memory"
            },
            {
              "expr": "sum(rate(grey_cost_total{resource_type=\"storage\"}[5m])) * 300",
              "legendFormat": "Storage"
            },
            {
              "expr": "sum(rate(grey_cost_total{resource_type=\"network\"}[5m])) * 300",
              "legendFormat": "Network"
            }
          ],
          "unit": "tokens",
          "stackMode": "normal",
          "legend": {"show": true, "placement": "bottom"}
        },
        {
          "title": "Cost per Tenant",
          "type": "timeseries",
          "gridPos": {"x": 12, "y": 28, "w": 12, "h": 8},
          "targets": [
            {
              "expr": "topk(5, sum(rate(grey_cost_total{tenant=~\"$tenant\"}[5m])) by (tenant)) * 300",
              "legendFormat": "{{tenant}}"
            }
          ],
          "unit": "tokens",
          "legend": {"show": true, "placement": "bottom"}
        }
      ]
    },
    {
      "title": "Pricing Optimization",
      "height": "300px",
      "panels": [
        {
          "title": "Demand Multiplier",
          "type": "heatmap",
          "gridPos": {"x": 0, "y": 36, "w": 12, "h": 8},
          "targets": [
            {
              "expr": "grey_demand_multiplier{cluster=~\"$cluster\"}",
              "legendFormat": "{{cluster}} - {{resource_type}}"
            }
          ],
          "unit": "short",
          "color": {
            "mode": "spectrum",
            "scheme": "YlOrRd"
          }
        },
        {
          "title": "Price Elasticity",
          "type": "timeseries",
          "gridPos": {"x": 12, "y": 36, "w": 12, "h": 8},
          "targets": [
            {
              "expr": "grey_price_elasticity_coefficient{resource_type=\"cpu\"}",
              "legendFormat": "CPU"
            },
            {
              "expr": "grey_price_elasticity_coefficient{resource_type=\"memory\"}",
              "legendFormat": "Memory"
            },
            {
              "expr": "grey_price_elasticity_coefficient{resource_type=\"storage\"}",
              "legendFormat": "Storage"
            }
          ],
          "unit": "short",
          "yAxisLabel": "Elasticity",
          "legend": {"show": true, "placement": "bottom"}
        }
      ]
    },
    {
      "title": "Ledger Activity",
      "height": "300px",
      "panels": [
        {
          "title": "Transaction Rate",
          "type": "timeseries",
          "gridPos": {"x": 0, "y": 44, "w": 8, "h": 8},
          "targets": [
            {
              "expr": "sum(rate(grey_ledger_transactions_total[5m]))",
              "legendFormat": "Transactions/sec"
            }
          ],
          "unit": "ops",
          "legend": {"show": true, "placement": "bottom"}
        },
        {
          "title": "Transaction Types",
          "type": "piechart",
          "gridPos": {"x": 8, "y": 44, "w": 8, "h": 8},
          "targets": [
            {
              "expr": "sum(increase(grey_ledger_transactions_total[$__range])) by (transaction_type)",
              "legendFormat": "{{transaction_type}}"
            }
          ],
          "legend": {"show": true, "placement": "right"}
        },
        {
          "title": "Ledger Size",
          "type": "timeseries",
          "gridPos": {"x": 16, "y": 44, "w": 8, "h": 8},
          "targets": [
            {
              "expr": "grey_ledger_entry_count",
              "legendFormat": "Total Entries"
            },
            {
              "expr": "grey_ledger_checkpoint_count",
              "legendFormat": "Checkpoints"
            }
          ],
          "unit": "short",
          "legend": {"show": true, "placement": "bottom"}
        }
      ]
    }
  ],
  "alerts": [
    {
      "name": "High Token Consumption Rate",
      "condition": "sum(rate(grey_token_consumed_total[5m])) > 1000",
      "for": "5m",
      "severity": "warning",
      "annotations": {
        "summary": "Token consumption rate exceeds 1000 tokens/sec",
        "description": "High token consumption may indicate resource abuse or pricing issues"
      }
    },
    {
      "name": "Token Supply Low",
      "condition": "sum(grey_token_active_balance) / sum(grey_token_total_supply) < 0.1",
      "for": "15m",
      "severity": "critical",
      "annotations": {
        "summary": "Active token supply below 10% of total",
        "description": "Most tokens have been consumed. Consider minting new tokens or investigating usage patterns"
      }
    },
    {
      "name": "Extreme Pricing Multiplier",
      "condition": "max(grey_demand_multiplier) > 5",
      "for": "10m",
      "severity": "warning",
      "annotations": {
        "summary": "Demand multiplier exceeds 5x",
        "description": "Extreme demand causing high prices. Consider adding capacity"
      }
    },
    {
      "name": "Ledger Sync Lag",
      "condition": "grey_ledger_sync_lag_seconds > 60",
      "for": "5m",
      "severity": "warning",
      "annotations": {
        "summary": "Ledger synchronization lag exceeds 60 seconds",
        "description": "Federation ledger sync is falling behind"
      }
    },
    {
      "name": "Negative Token Balance",
      "condition": "min(grey_token_balance) < 0",
      "for": "1m",
      "severity": "critical",
      "annotations": {
        "summary": "Tenant has negative token balance",
        "description": "Overdraft detected. Investigate immediately"
      }
    }
  ]
}
